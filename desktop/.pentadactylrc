" Make sure plugins are loaded
" To allow plugin settings
loadplugins

" Do not let google or grooveshark steal focus
set strictfocus='chrome:*':laissez-faire,*:moderate,'google':despotic,'grooveshark':despotic

" h and l to hop history
map h -ex ba
map l -ex fo

" <c-h> and <c-l> to scroll
map -builtin <c-h> h
map -builtin <c-l> l

" H, <c-h> or m and L, <c-l> or , to hop tabs
map H <C-p>
map L <C-n>
map -builtin m <C-p>
map -builtin , <C-n>

" Hints only use left-hand accessible keys
set hintkeys=12345

" GUI toggles
set guioptions=Cs
map ü -ex set showtabline!=always,never
map Ü -ex set guioptions!=s

" Tabs
set! browser.tabs.loadInBackground=true
if "tabclose" in dactyl.modules.options
    " If the tab-options plugin is loaded
    set tabclose=previous,right,opener,left
    set tabopen=link:groupright,orphan:groupright,external:end

    map -builtin d :tabc<CR>
    map -builtin D :tabc<CR>gT
    map -builtin . :tabc<CR>

    " Disable firefox's own related feature to prevent bugs
    set! browser.tabs.insertRelatedAfterCurrent=false
else
    map -silent D dgT
    map -builtin . d
endif

map -builtin v <C-^>
map -builtin gt <C-n>
map -builtin -silent c :tabc! <Nop>

" Default to Full-Zoom, alternate bindings for Text-Zoom
map -builtin + ZI
map -builtin "-" ZO
map -builtin * zi
map -builtin _ zo
map -builtin = zZ

" a and q to set on-page-bookmarks
" m is used for tabs
map -builtin a m
map -builtin q '

" dialog shortcuts
map -silent -builtin Q -ex qmarks
map -silent -builtin A -ex dl

" No homepage
map gh <Nop>

" Follow next-links, german patterns
map ä ]]
map ö [[

set nextpattern='\bnext\b','\bnächste\b',^>$,'^(>>|»)$','^(>|»)','(>|»)$','\bmore\b','\bweiter\b','\bspäter\b'
set previouspattern='\b(prev|previous)\b','\bvorherige\b',^<$,'^(<<|«)$','^(<|«)','(<|«)$','\bzurück\b','\bfrüher\b'

" Noscript Mappings
map e :set nst!=<Tab>
map E :set nss!=<Tab>

" Default search engine
set defsearch=dd

" Download Sorts
set dlsort=-active,-time,-date,+filename

" mswin.vimp - mappings to make copy/paste in Vimperator behave like Windows
map -builtin <C-q> <C-v>
map -builtin <C-Q> <C-z>
" TODO: this should probably be <C-Break> - see :help dos-CTRL-break in Vim
map -builtin <C-s> <C-c>

imap -builtin <C-q> <C-v>
imap -builtin <C-Q> <C-z>
imap -builtin <C-s> <C-c>

map -builtin <C-c> <C-v><C-c>
map -builtin <C-v> <C-v><C-v>
map -builtin <C-x> <C-v><C-x>
map -builtin <C-z> <C-v><C-z>
map -builtin <C-y> <C-v><C-y>

cmap -builtin <C-c> <C-v><C-c>
cmap -builtin <C-v> <C-v><C-v>
cmap -builtin <S-Insert> <C-v><C-v>
cmap -builtin <C-x> <C-v><C-x>
cmap -builtin <C-z> <C-v><C-z>
cmap -builtin <C-y> <C-v><C-y>

imap -builtin <C-c> <C-v><C-c>
imap -builtin <C-v> <C-v><C-v>
imap -builtin <S-Insert> <C-v><C-v>
imap -builtin <C-x> <C-v><C-x>
imap -builtin <C-z> <C-v><C-z>
imap -builtin <C-y> <C-v><C-y>

" vim: ft=vim
