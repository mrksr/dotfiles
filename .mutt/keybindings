###########
#  Index  #
###########
bind index j       next-entry
bind index k       previous-entry
bind index gg      first-entry
bind index G       last-entry

bind index R       group-reply
bind index <tab>   sync-mailbox
bind index <space> collapse-thread

# Ctrl-R to mark all as read
macro index \Cr "T~U<enter><tag-prefix><clear-flag>N<untag-pattern>.<enter>" "mark all messages as read"

# Sync email
# macro index O "<shell-escape>offlineimap<enter>"           "run offlineimap to sync all mail"
# macro index o "<shell-escape>offlineimap -qf INBOX<enter>" "run offlineimap to sync inbox"

# Saner copy/move dialogs
macro index C "<copy-message>?<toggle-mailboxes>" "copy a message to a mailbox"
macro index M "<save-message>?<toggle-mailboxes>" "move a message to a mailbox"

macro index S \
"<enter-command>set my_old_pipe_decode=\$pipe_decode my_old_wait_key=\$wait_key nopipe_decode nowait_key<enter>\
<shell-escape>notmuch-mutt -o ~/Mail/temporary/search -r --prompt search<enter>\
<change-folder-readonly>+temporary/search<enter>\
<enter-command>set pipe_decode=\$my_old_pipe_decode wait_key=\$my_old_wait_key<enter>" \
     "notmuch: search mail"

#############
#  Sidebar  #
#############
bind index,pager J sidebar-next
bind index,pager K sidebar-prev
bind index,pager L sidebar-open

###########
#  Pager  #
###########
bind pager k  previous-line
bind pager j  next-line
bind pager gg top
bind pager G  bottom

bind pager p previous-undeleted
bind pager n next-undeleted

bind pager R  group-reply

bind attach <return> view-mailcap

#################
#  Composition  #
#################
bind compose p postpone-message
bind index p recall-message

#vim: set ft=muttrc
